<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>tictactoe</title>
  <style>
    *{margin:0;padding:0;box-sizing: border-box;}
    .wrap>div{
      width:calc(100% / 3);height:calc(100% / 3);
      font-size: 45px;text-align: center;line-height: 67px;
      float:left;border:1px solid #000;
    }
    .wrap{width: 240px;height: 240px;}
  </style>
  <script>
    let User= {};
    let Ai= {};
    let turn= true;
    const Win= [
      [0,1,2],
      [3,4,5],
      [6,7,8],
      [0,3,6],
      [1,4,7],
      [2,5,8],
      [0,4,8],
      [2,4,6],
    ];
    let text_box;
    let box;
    let end= true;
    const _Check= (t) =>{
      for(let i=0;i<Win.length;i++){
          if( (t&&User[Win[i][0]]&&User[Win[i][1]]&&User[Win[i][2]]) || (!t&&Ai[Win[i][0]]&& Ai[Win[i][1]]&& Ai[Win[i][2]])) {
            text_box.innerText= t? "User1 Win!": "User2 Win!";
            end= false;
          }
      }
    };
    window.onload= () =>{
      text_box= document.getElementById("turn");
      box= document.getElementsByClassName("box");
      for(let i=0;i<box.length;i++){
        User[i]=false;
        Ai[i]=false;
        box[i].addEventListener("click", function (){
          if(end){
            turn? User[i]= true: Ai[i]= true;
            turn? this.innerText= "O": this.innerText= "X";
            _Check(turn);
            if(end){
              turn= !turn;
              text_box.innerText= turn? "User1의 차례": "User2의 차례";
            }
          }
        });
      }
    }
  </script>
</head>
<body>
  <div id="App">
    <div class="wrap">
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
      <div class="box"></div>
    </div>
    <span id="turn">User1의 차례</span>
  </div>
</body>
</html>
